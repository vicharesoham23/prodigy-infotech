def caesar_cipher(text, shift, mode):
    result = ""

    # Normalize shift to handle large values
    shift = shift % 26

    for char in text:
        if char.isalpha():
            base = ord('A') if char.isupper() else ord('a')

            if mode == "encrypt":
                new_char = chr((ord(char) - base + shift) % 26 + base)
            elif mode == "decrypt":
                new_char = chr((ord(char) - base - shift) % 26 + base)

            result += new_char
        else:
            # Keep spaces, numbers, and symbols unchanged
            result += char

    return result


def main():
    print("=== Caesar Cipher Program ===")
    print("1. Encrypt")
    print("2. Decrypt")

    choice = input("Choose an option (1 or 2): ")

    if choice == "1":
        message = input("Enter the message to encrypt: ")
        shift = int(input("Enter the shift value: "))
        encrypted_text = caesar_cipher(message, shift, "encrypt")
        print("Encrypted Message:", encrypted_text)

    elif choice == "2":
        message = input("Enter the message to decrypt: ")
        shift = int(input("Enter the shift value: "))
        decrypted_text = caesar_cipher(message, shift, "decrypt")
        print("Decrypted Message:", decrypted_text)

    else:
        print("Invalid choice. Please select 1 or 2.")


if __name__ == "__main__":
    main()
